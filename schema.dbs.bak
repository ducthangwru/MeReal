<?xml version="1.0" encoding="UTF-8" ?>
<project name="mereal" id="Project_1993e7d" template="Default" database="MongoDb" >
	<schema name="mereal" schemaname="mereal" >
		<table name="answers" generator_rows="150" >
			<comment><![CDATA[Câu trả lời của câu hỏi]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="question" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Khóa ngoại question với bảng questions]]></comment>
			</column>
			<column name="content" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Nội dung đáp án]]></comment>
			</column>
			<column name="is_true" type="boolean" jt="16" >
				<comment><![CDATA[Đúng hay sai]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="update_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian update]]></comment>
			</column>
			<fk name="Fk_answers_questions" virtual="y" to_schema="mereal" to_table="questions" >
				<fk_column name="question" pk="_id" />
			</fk>
		</table>
		<table name="chanel_gifts" generator_rows="337" >
			<comment><![CDATA[Phần thưởng cho mỗi lịch phát sóng]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="chanel_schedule" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Khóa ngoại lịch phát sóng]]></comment>
			</column>
			<column name="gift" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Khóa ngoại phần thưởng cho lịch phát sóng đó]]></comment>
			</column>
			<column name="top_to" type="integer" jt="4" mandatory="y" regexp="int:from=0;to=10;" >
				<defo>0</defo>
				<comment><![CDATA[Phần thưởng dành cho từ top mấy (top_to = 0 tức chia cho toàn bộ người thắng)]]></comment>
			</column>
			<column name="top_from" type="integer" jt="4" mandatory="y" regexp="0" >
				<defo>0</defo>
				<comment><![CDATA[Phần thưởng chia cho đến top mấy (top_from = 0 tức chia cho toàn bộ người thắng)]]></comment>
			</column>
			<column name="desc" type="string" jt="12" mandatory="y" regexp="((John|Anne|Tony) (has free time|bought new car|is shopping|is walking). ){2,5}" >
				<comment><![CDATA[Mô tả phần thưởng]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian update]]></comment>
			</column>
			<fk name="Fk_chanel_gifts_chanel_schedules" virtual="y" to_schema="mereal" to_table="chanel_schedules" >
				<fk_column name="chanel_schedule" pk="_id" />
			</fk>
			<fk name="Fk_chanel_gifts_gifts" virtual="y" to_schema="mereal" to_table="gifts" >
				<fk_column name="gift" pk="_id" />
			</fk>
		</table>
		<table name="chanel_schedule_questions" generator_rows="337" >
			<comment><![CDATA[Câu hỏi trong lịch phát sóng]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="question" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Khóa ngoại với bảng questions]]></comment>
			</column>
			<column name="chanel_schedule" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Khóa ngoại với bảng chanel_schedules]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian update]]></comment>
			</column>
			<fk name="Fk_chanel_schedule_questions_questions" virtual="y" to_schema="mereal" to_table="questions" >
				<fk_column name="question" pk="_id" />
			</fk>
			<fk name="Fk_chanel_schedule_questions_chanel_schedules" virtual="y" to_schema="mereal" to_table="chanel_schedules" >
				<fk_column name="chanel_schedule" pk="_id" />
			</fk>
		</table>
		<table name="chanel_schedules" generator_rows="225" >
			<comment><![CDATA[Lịch phát sóng của kênh]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="name" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Tên lịch phát sóng]]></comment>
			</column>
			<column name="chanel" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Khóa ngoại của bảng chanels]]></comment>
			</column>
			<column name="desc" type="string" jt="12" mandatory="y" regexp="((John|Anne|Tony) (has free time|bought new car|is shopping|is walking). ){2,5}" >
				<comment><![CDATA[Mô tả lịch phát sóng]]></comment>
			</column>
			<column name="time" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian phát sóng]]></comment>
			</column>
			<column name="questions" type="integer" jt="4" mandatory="y" regexp="int:from=0;to=10;" >
				<defo>0</defo>
				<comment><![CDATA[Số lượng câu hỏi]]></comment>
			</column>
			<column name="time_question" type="integer" jt="4" mandatory="y" regexp="int:from=10;to=30;" >
				<defo>10</defo>
				<comment><![CDATA[Thời gian trả lời của mỗi câu hỏi (đơn vị s)]]></comment>
			</column>
			<column name="type" type="integer" jt="4" mandatory="y" regexp="(1|2)" >
				<defo>1</defo>
				<comment><![CDATA[Loại phần thưởng (1 là tiền mặt, 2 là hiện vật)]]></comment>
			</column>
			<column name="status" type="integer" jt="4" mandatory="y" regexp="(-1|1)" >
				<defo>1</defo>
				<comment><![CDATA[Trạng thái của lịch phát sóng (1 là active, 2 là close)]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian update]]></comment>
			</column>
			<fk name="Fk_chanel_schedules_chanels" virtual="y" to_schema="mereal" to_table="chanels" >
				<fk_column name="chanel" pk="_id" />
			</fk>
		</table>
		<table name="chanels" generator_rows="150" >
			<comment><![CDATA[Mỗi 1 agent có 1 chanel riêng]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="name" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Tên chanel]]></comment>
			</column>
			<column name="user" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Khóa ngoại user_id]]></comment>
			</column>
			<column name="desc" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Mô tả kênh]]></comment>
			</column>
			<column name="status" type="integer" jt="4" mandatory="y" regexp="(-1|1)" >
				<defo>1</defo>
				<comment><![CDATA[Trạng thái kênh (1 là active, -1 là lock)]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian update]]></comment>
			</column>
			<fk name="Fk_chanels_users" virtual="y" to_schema="mereal" to_table="users" >
				<fk_column name="user" pk="_id" />
			</fk>
		</table>
		<table name="gifts" generator_rows="100" >
			<comment><![CDATA[Danh sách quà tặng sẽ lưu vào đây]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="name" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Tên quà tặng]]></comment>
			</column>
			<column name="desc" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Mô tả quà tặng]]></comment>
			</column>
			<column name="type" type="integer" jt="4" mandatory="y" regexp="(1|2)" >
				<defo>1</defo>
				<comment><![CDATA[Loại quà tặng: 1 là tiền mặt, 2 là hiện vật]]></comment>
			</column>
			<column name="price" type="double" jt="8" mandatory="y" regexp="double:from=100000;to=200000;" >
				<defo>0</defo>
				<comment><![CDATA[Giá hoặc số tiền đối với loại quà tặng là tiền mặt]]></comment>
			</column>
			<column name="status" type="integer" jt="4" mandatory="y" regexp="(-1|1)" >
				<defo>1</defo>
				<comment><![CDATA[Trạng thái quà tặng 1 là active, -1 là lock]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian updated]]></comment>
			</column>
		</table>
		<table name="messages" generator_rows="150" >
			<comment><![CDATA[Tin nhắn chat riêng lưu vào đây]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="user_from" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Người gửi khóa ngoại với bảng users]]></comment>
			</column>
			<column name="user_to" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[Người nhận khóa ngoại với bảng user]]></comment>
			</column>
			<column name="content" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Nội dung gửi tin]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian updated]]></comment>
			</column>
			<fk name="Fk_messages_users" virtual="y" to_schema="mereal" to_table="users" >
				<fk_column name="user_from" pk="_id" />
			</fk>
			<fk name="Fk_messages_users_0" virtual="y" to_schema="mereal" to_table="users" >
				<fk_column name="user_to" pk="_id" />
			</fk>
		</table>
		<table name="questions" generator_rows="100" >
			<comment><![CDATA[Danh sách câu hỏi sẽ lưu tại đây]]></comment>
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="content" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Nội dung câu hỏi]]></comment>
			</column>
			<column name="suggest" type="string" jt="12" >
				<comment><![CDATA[Nội dung gợi ý]]></comment>
			</column>
			<column name="status" type="integer" jt="4" mandatory="y" regexp="(-1|1)" >
				<defo>1</defo>
				<comment><![CDATA[Trạng thái câu hỏi (1 là active, -1 lock)]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian update]]></comment>
			</column>
		</table>
		<table name="users" generator_rows="100" >
			<column name="_id" type="oid" jt="-8" mandatory="y" >
				<comment><![CDATA[id của bảng]]></comment>
			</column>
			<column name="username" type="string" jt="12" mandatory="y" regexp="($First Name)[0-9]{3,3}" >
				<comment><![CDATA[Tên đăng nhập của user]]></comment>
			</column>
			<column name="password" type="string" jt="12" mandatory="y" regexp="25d55ad283aa400af464c76d713c07ad" >
				<comment><![CDATA[Mật khẩu của user]]></comment>
			</column>
			<column name="fullname" type="string" jt="12" mandatory="y" >
				<comment><![CDATA[Tên đầy đủ của user]]></comment>
			</column>
			<column name="is_online" type="integer" jt="4" regexp="0" >
				<defo>0</defo>
				<comment><![CDATA[Trạng thái đăng nhập của user]]></comment>
			</column>
			<column name="socket_id" type="string" jt="12" regexp="[a-z]{0}" >
				<comment><![CDATA[id socket của user]]></comment>
			</column>
			<column name="avatar" type="string" jt="12" regexp="[a-z]{0}" >
				<comment><![CDATA[Ảnh đại diện của user]]></comment>
			</column>
			<column name="email" type="string" jt="12" regexp="[a-z]{4,8}([0-9]{0,3}|.[a-z]{4,10})@([a-z]{4,9}.)?([a-z-]{6}).(org|com|net)" >
				<comment><![CDATA[Email của user]]></comment>
			</column>
			<column name="status" type="integer" jt="4" mandatory="y" regexp="(-1|1)" >
				<defo>1</defo>
				<comment><![CDATA[Trạng thái của user (1 là active, -1 là lock)]]></comment>
			</column>
			<column name="role" type="integer" jt="4" mandatory="y" regexp="(1|2|3)" >
				<defo>1</defo>
				<comment><![CDATA[Quyền của user (1 là user, 2 là agent, 3 là admin)]]></comment>
			</column>
			<column name="wallet" type="double" jt="8" mandatory="y" regexp="0" >
				<defo>0</defo>
				<comment><![CDATA[Ví tiền của user]]></comment>
			</column>
			<column name="wallet_gift" type="array" jt="2003" mandatory="y" regexp="json_list:count_min=1;count_max=10;" >
				<defo>[]</defo>
				<comment><![CDATA[Ví quà thưởng của user]]></comment>
			</column>
			<column name="created_at" type="date" jt="91" mandatory="y" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<defo>sysdate</defo>
				<comment><![CDATA[Thời gian tạo user]]></comment>
			</column>
			<column name="updated_at" type="date" jt="91" regexp="date:from=&#039;01.01.2018&#039;;to=&#039;01.01.2020&#039;;" >
				<comment><![CDATA[Thời gian cập nhật user]]></comment>
			</column>
		</table>
	</schema>
	<connector name="MongoDb" database="MongoDb" driver_class="com.dbschema.MongoJdbcDriver" driver_jar="mongojdbc1.2.jar" driver_desc="LDAP Authentication" url="mongodb://localhost:27017/mereal" host="localhost" port="27017" instance="mereal" />
	<layout name="Default Layout" id="Layout_5852547" show_relation="columns" >
		<entity schema="mereal" name="chanels" color="C1D8EE" x="48" y="80" />
		<entity schema="mereal" name="chanel_schedules" color="C1D8EE" x="448" y="64" />
		<entity schema="mereal" name="chanel_schedule_questions" color="C1D8EE" x="960" y="448" />
		<entity schema="mereal" name="questions" color="C1D8EE" x="720" y="464" />
		<entity schema="mereal" name="messages" color="C1D8EE" x="80" y="480" />
		<entity schema="mereal" name="gifts" color="C1D8EE" x="944" y="80" />
		<entity schema="mereal" name="answers" color="C1D8EE" x="448" y="432" />
		<entity schema="mereal" name="users" color="C1D8EE" x="272" y="208" />
		<entity schema="mereal" name="chanel_gifts" color="C1D8EE" x="656" y="48" />
		<browser id="Browse_3c4a26b" name="user" confirm_updates="y" >
			<browse_table schema="mereal" entity="chanels" x="20" y="20" width="400" height="300" record_view="y" />
		</browser>
	</layout>
</project>